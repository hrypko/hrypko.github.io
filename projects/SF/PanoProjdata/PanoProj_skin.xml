<?xml version="1.0" encoding="UTF-8"?>
<krpano version="1.17">

    
  <style name="IconDefaultPointSpotStyle1"
         url="%FIRSTXML%/spots/hotspot_direction_sequence_user_defaultpoint0.png"
         visible="false"

         frame="0"
         lastframe="18"
         framewidth="50"
         frameheight="50"
         stopspotsequence="false"
         onloaded="setdefaultanimatedspotframe();startspotanimation(0.1);if(scene[get(xml.scene)].planar,if(zoom,set(zoom, false);););"

         edge="bottom" ox="0" oy="0"
         zoom="true"
         
         alpha="0.8"
         onhover="onhoverIconDefaultPointSpotStyle1"
         onover="onoverIconDefaultPointSpotStyle1"
         onout="onoutIconDefaultPointSpotStyle1"
         height="50"
         width="50"
         />
  <action name="onhoverIconDefaultPointSpotStyle1">
    showtooltip(hotspot);
  </action>
  <action name="onoverIconDefaultPointSpotStyle1">
tween(scale, 1.2);
tween(alpha, 1);

  </action>
  <action name="onoutIconDefaultPointSpotStyle1">
    hideTooltip();
tween(scale, 1);
tween(alpha, 0.8);

  </action>

          



  <krpano theme12barbuilt="false" theme12backgroundwidthwhenclosed="0" theme12backgroundwidthwhenopened="0" theme12IsOpened="false" />
  <events name="theme12barevents" onxmlcomplete="theme12buildMenuBar();" keep="true"/>
  <action name="theme12buildMenuBar">
    ifnot (theme12barbuilt, theme12buildMenu(); set(theme12barbuilt, true););
  </action>

  <style name="theme12_btn_style"
         keep="true"
         edge="right"
         align="right"
         x="0" y="0"
         height="40" width="40"
         crop="0|0|50|50"
         onovercrop="0|50|50|50"
         ondowncrop="0|100|50|50"
         onhover="showTooltip(bottom, theme12menuTooltipStyle, bottom);"
         onout="hideTooltip();"
         />

    <layer name="theme12_menu_bg"
            keep="true"
            type="container"
            zorder="0"
            width="40"
            height="40"
            align="bottom"
            x="0" y="10"
            maskchildren="true"
            rotate="0"
            visible="false"
            >


    <layer name="theme12btn_in"
            url="%FIRSTXML%/graphics/urbancontrolbar/btn_zoom_in.png"
            ondown="set(fov_moveforce, -1);"
            onup="set(fov_moveforce, 0);"
            style="theme12_btn_style"
            tooltip="controlBar_urbanzoomInTip"
            devices="desktop"
            visible="false"
            />
    <layer name="theme12btn_out"
            url="%FIRSTXML%/graphics/urbancontrolbar/btn_zoom_out.png"
            ondown="set(fov_moveforce, +1);"
            onup="set(fov_moveforce, 0);"
            style="theme12_btn_style"
            tooltip="controlBar_urbanzoomOutTip"
            devices="desktop"
            visible="false"
            />

    <layer name="theme12btn_left"
            url="%FIRSTXML%/graphics/urbancontrolbar/btn_move_left.png"
            ondown="set(hlookat_moveforce, -1);"
            onup="set(hlookat_moveforce, 0);"
            style="theme12_btn_style"
            tooltip="controlBar_urbanmoveLeftTip"
            devices="desktop"
            visible="false"
            />
    <layer name="theme12btn_right"
            url="%FIRSTXML%/graphics/urbancontrolbar/btn_move_right.png"
            ondown="set(hlookat_moveforce, +1);"
            onup="set(hlookat_moveforce, 0);"
            style="theme12_btn_style"
            tooltip="controlBar_urbanmoveRightTip"
            devices="desktop"
            visible="false"
            />
    <layer name="theme12btn_up"
            url="%FIRSTXML%/graphics/urbancontrolbar/btn_move_up.png"
            ondown="set(vlookat_moveforce, -1);"
            onup="set(vlookat_moveforce, 0);"
            style="theme12_btn_style"
            tooltip="controlBar_urbanmoveUpTip"
            devices="desktop"
            visible="false"
            />
    <layer name="theme12btn_down"
            url="%FIRSTXML%/graphics/urbancontrolbar/btn_move_down.png"
            ondown="set(vlookat_moveforce, +1);"
            onup="set(vlookat_moveforce, 0);"
            style="theme12_btn_style"
            tooltip="controlBar_urbanmoveDownTip"
            devices="desktop"
            visible="false"
            x="0"
            y="0"
            />





    <layer name="theme12btn_openfs"
            url="%FIRSTXML%/graphics/urbancontrolbar/btn_enter_fs.png"
            onclick="enterFullscreen();"
            style="theme12_btn_style"
            visible="false"
            devices="fullscreensupport"
            tooltip="controlBar_urbanopenFsTip"
            />
    <layer name="theme12btn_closefs"
            url="%FIRSTXML%/graphics/urbancontrolbar/btn_close_fs.png"
            onclick="exitFullscreen();"
            style="theme12_btn_style"
            visible="false"
            devices="fullscreensupport"
            tooltip="controlBar_urbancloseFsTip"
            />

    <layer name="theme12btn_autorotate_on"
            url="%FIRSTXML%/graphics/urbancontrolbar/btn_start_autorotation.png"
            onclick="startautorotation();"
            style="theme12_btn_style"
            visible="false"
            tooltip="controlBar_urbanautorotateOnTip"
            />
    <layer name="theme12btn_autorotate_off"
            url="%FIRSTXML%/graphics/urbancontrolbar/btn_stop_autorotation.png"
            onclick="stopautorotation();"
            style="theme12_btn_style"
            visible="false"
            tooltip="controlBar_urbanautorotateOffTip"
            />





    <layer name="theme12btn_hidecontrols"
           url="%FIRSTXML%/graphics/urbancontrolbar/btn_hide_controls.png"
           style="theme12_btn_style"
           onclick="theme12hideMenuControls();hideTourControls();"
           visible="false"
           tooltip="controlBar_urbanhideControlsTip"
           />
    <layer name="theme12btn_showcontrols"
           url="%FIRSTXML%/graphics/urbancontrolbar/btn_show_controls.png"
           style="theme12_btn_style"
           onclick="theme12showMenuControls();showTourControls();"
           tooltip="controlBar_urbandisplayControlsTip"
           visible="false"
           />
 </layer>





  <action name="theme12hideMenuControls">
    set(theme12IsOpened, false);
    set(layer[theme12btn_hidecontrols].visible, false);
    set(layer[theme12btn_showcontrols].visible, true);


if (device.desktop,
	set(layer[theme12btn_in].visible, false);
	set(layer[theme12btn_out].visible, false);
);
if (device.desktop,
	set(layer[theme12btn_up].visible, false);
	set(layer[theme12btn_down].visible, false);
);
if (device.desktop,
	set(layer[theme12btn_left].visible, false);
	set(layer[theme12btn_right].visible, false);
);
	theme12updateFullscreenButtons();


	theme12updateAutorotationButtons();




    set(layer[theme12_menu_bg].width , get(theme12backgroundwidthwhenclosed));
  set(layer[theme12_menu_bg].visible, true);
  </action>
  <action name="theme12showMenuControls">
    set(theme12IsOpened, true);
    set(layer[theme12btn_hidecontrols].visible, true);
    set(layer[theme12btn_showcontrols].visible, false);
	set(layer[theme12_menu_bg].visible, true);


if (device.desktop,
	set(layer[theme12btn_in].visible, true);
	set(layer[theme12btn_out].visible, true);
);
if (device.desktop,
	set(layer[theme12btn_up].visible, true);
	set(layer[theme12btn_down].visible, true);
);
if (device.desktop,
	set(layer[theme12btn_left].visible, true);
	set(layer[theme12btn_right].visible, true);
);
	theme12updateFullscreenButtons();


	theme12updateAutorotationButtons();





    set(layer[theme12_menu_bg].width, get(theme12backgroundwidthwhenopened));
  </action>



  <events name="theme12menufullscreenchangeevent"
          onenterfullscreen="theme12updateFullscreenButtons();"
          onexitfullscreen="theme12updateFullscreenButtons();"
          keep="true"/>
	<action name="theme12HideFullscreenButtons">
		set(layer[theme12btn_openfs].visible , false);
		set(layer[theme12btn_closefs].visible, false);
	</action>
	<action name="theme12ShowFullscreenButtons">
		if (device.fullscreensupport,
			if(tour_fullscreen,
				set(layer[theme12btn_openfs].visible , false);
				set(layer[theme12btn_closefs].visible, true);
			,
				set(layer[theme12btn_openfs].visible ,true);
				set(layer[theme12btn_closefs].visible,false);
			);
		,
			theme12HideFullscreenButtons();
		);
	</action>
	<action name="theme12updateFullscreenButtons">
		set(theme12DisplayFullscreenButtons, false);
		if (theme12IsOpened, set(theme12DisplayFullscreenButtons, true););
		if (theme12DisplayFullscreenButtons,
			theme12ShowFullscreenButtons();
		,
			theme12HideFullscreenButtons();
		);
	</action>

	<events name="theme12AutorotationEvents"
		onstartautorotation="theme12updateAutorotationButtons();"
		onresumeautorotation="theme12updateAutorotationButtons();"
		onstopautorotation="theme12updateAutorotationButtons();"
		onpauseautorotation="theme12updateAutorotationButtons();"
		keep="true"/>
	<action name="theme12HideAutorotationButtons">
		set(layer[theme12btn_autorotate_off].visible, false);
		set(layer[theme12btn_autorotate_on].visible , false);
	</action>
	<action name="theme12ShowAutorotationButtons">
		if(tour_autorotateenabled==false,
			set(layer[theme12btn_autorotate_off].visible, false);
			set(layer[theme12btn_autorotate_on].visible , true);
		,
			set(layer[theme12btn_autorotate_off].visible, true);
			set(layer[theme12btn_autorotate_on].visible , false);
		);
	</action>
	<action name="theme12updateAutorotationButtons">
		set(theme12DisplayAutorotationButtons, false);
		if (theme12IsOpened, set(theme12DisplayAutorotationButtons, true););
		if (theme12DisplayAutorotationButtons,
			theme12ShowAutorotationButtons();
		,
			theme12HideAutorotationButtons();
		);
	</action>



  <textstyle name="theme12menuTooltipStyle"
             font="Helvetica"
             fontsize="16"
             bold="true"
             italic="false"
             background="false"
             border="false"
             alpha="1"
             textcolor="0x1effed"
             effect="dropshadow(2,45,0x000000,4,1);"
             origin="cursor"
             edge="bottom"
             yoffset="-20"
             xoffset="0"
             noclip="true"/>

<layer name="theme12menuTooltipStyle"
	keep="true"
	enabled="false"
	capture="false"
	url="%FIRSTXML%/graphics/textfield.swf"
	align="center"
	background="true"
	backgroundcolor="0x000000"
	backgroundalpha="0.3"
	border="false"
	bordercolor="0xffffff"
	css="color:#1effed;font-family:Helvetica;font-weight:bold;font-size:16px;text-align:center;"
	width="200"
	height="20"
	autoheight="true"
		edge="bottom"
	selectable="false"
	textshadow="1.0"
	zorder="0"
	visible="false"
	html=""
	devices="html5"
/>



  <action name="theme12buildMenu">
    
    set(theme12button_pos, 0);

	set(theme12backgroundwidthwhenclosed, 40);
    set(layer[theme12btn_hidecontrols].x, get(theme12button_pos));
    set(layer[theme12btn_showcontrols].x, get(theme12button_pos));
    inc(theme12button_pos, 45);



      if (device.fullscreensupport,
        set(layer[theme12btn_openfs].x , get(theme12button_pos));
        set(layer[theme12btn_closefs].x, get(theme12button_pos));
        inc(theme12button_pos, 45);
      );



      set(layer[theme12btn_autorotate_on].x , get(theme12button_pos));
      set(layer[theme12btn_autorotate_off].x, get(theme12button_pos));
      inc(theme12button_pos, 45);





      if (device.desktop,
        set(layer[theme12btn_right].x, get(theme12button_pos));
        inc(theme12button_pos, 45);
        set(layer[theme12btn_left].x, get(theme12button_pos));
        inc(theme12button_pos, 45);
      );

      if (device.desktop,
        set(layer[theme12btn_down].x, get(theme12button_pos));
        inc(theme12button_pos, 45);
        set(layer[theme12btn_up].x, get(theme12button_pos));
        inc(theme12button_pos, 45);
      );
      if (device.desktop,
        set(layer[theme12btn_out].x, get(theme12button_pos));
        inc(theme12button_pos, 45);
        set(layer[theme12btn_in].x, get(theme12button_pos));
        inc(theme12button_pos, 45);
      );

      dec(theme12button_pos, 5);

      set(theme12backgroundwidthwhenopened, get(theme12button_pos));
      set(layer[theme12_menu_bg].width, get(theme12backgroundwidthwhenopened));
	
	

    </action>

	<events name="theme12StartTourEvents" onTourStart="theme12CallOnStartTour();" keep="true" />
	
	<action name="theme12CallOnStartTour">
		
		theme12showMenuControls();
	</action>



  <layer align="bottomright"
         x="10"
         y="0"
         zorder="1"
         name="logo"
         keep="true"
         visible="false"
         capture="false"
		
			tooltip="logotooltipText"
			onhover="showTooltip(bottomright);"
			onout="hideTooltip();"
         url="%FIRSTXML%/graphics/logo/_6373_680.png" 
         onclick="openurl(http://artpicnic.org/,_blank);"


         />

  <events name="logoevents" 
    onTourStart="showlogo();"
    keep="true" />

  <action name="hidelogo">
    set(layer[logo].visible, false);
  </action>
  <action name="showlogo">
      set(layer[logo].visible, true);
  </action>





  <progress showload="bar(
                center

                ,
				200,
                10,
				0,
                50,
				shaded,
				0x000000,0xdddddd,0xdddddd,
				0x111111,0,
				0xffffff,0
				)"
			showwait="loopings(
				0xffffff,
				15,15,
				0,0,
				0xffffff,8,
				0,0,center
				)"
			showreloads="false"
			parent=""
			/>
  <plugin name="doubleclick" url="%FIRSTXML%/graphics/doubleclick/fieldofview_dc.swf" alturl="%FIRSTXML%/graphics/doubleclick/fieldofview_dc.js" keep="true" ondblclick="ondoubleclick();"/>
  <action name="ondoubleclick">switchFullscreen();

  </action>
<ptplugin name="projectionMenu" engine="kolorMenu">
	<settings>
		<option name="position" value="topleft" type="string" />
		<option name="orientation" value="vertical" type="string" />
		<option name="sub_orientation" value="horizontal" type="string" />
		<option name="margin_x" value="0" type="int" />
		<option name="margin_y" value="0" type="int" />
		<option name="background_color" value="3da9b3" type="string" />
		<option name="background_alpha" value="1" type="float" />
		<option name="item_spacer" value="0" type="int" />
		<option name="border_radius" value="0" type="int" />
		<option name="full_size" value="false" type="bool" />

		<option name="item_out_border_radius" value="0" type="int" />
		<option name="item_out_bg_color"      value="3da9b3" type="string" />
		<option name="item_out_bg_alpha"      value="1" type="float" />
		<option name="item_out_font_color"    value="ffffff" type="string" />
		<option name="item_out_font_family"   value="Arial" type="string" />
		<option name="item_out_font_size"     value="14" type="int" />
		<option name="item_out_font_weight"   value="normal" type="string" />
		<option name="item_out_font_style"    value="normal" type="string" />
		<option name="item_out_font_decoration"    value="normal" type="string" />
		
		<option name="item_hover_border_radius" value="0" type="int" />
		<option name="item_hover_bg_color" value="49cbd7" type="string" />
		<option name="item_hover_bg_alpha"      value="1" type="float" />
		<option name="item_hover_font_color"    value="ffffff" type="string" />
		<option name="item_hover_font_family"   value="Arial" type="string" />
		<option name="item_hover_font_size"     value="14" type="int" />
		<option name="item_hover_font_weight"   value="normal" type="string" />
		<option name="item_hover_font_style"    value="normal" type="string" />
		<option name="item_hover_font_decoration"    value="normal" type="string" />
		
		<option name="item_selected_color" value="3da9b3" type="string" />
		<option name="item_selected_alpha" value="1" type="string" />
		
		<option name="zorder"                   value="4" type="int" />
	</settings>
	<internaldata>
		<group name="projectionMenuButton" titleID="projectionMenumenutitlelabel" thumbnail="" subMenu="true">
			<item name="projViewNormal"        titleID="projectionMenunormallabel" action="invokeKrFunction('setViewNormal();')"        thumbnail=""/>
			<item name="projViewFisheye"       titleID="projectionMenufisheyelabel" action="invokeKrFunction('setViewFisheye();')"       thumbnail=""/>
			<item name="projViewArchitectural" titleID="projectionMenuarchitecturallabel" action="invokeKrFunction('setViewArchitectural();')" thumbnail=""/>
			<item name="projViewStereographic" titleID="projectionMenustereographiclabel" action="invokeKrFunction('setViewStereographic();')" thumbnail=""/>
			<item name="projViewPannini"       titleID="projectionMenupanninilabel" action="invokeKrFunction('setViewPannini();')"       thumbnail=""/>
			<item name="projViewLittlePlanet"  titleID="projectionMenulittleplanetlabel" action="invokeKrFunction('setViewLittlePlanet();')"  thumbnail=""/>
			<item name="projFisheyeBall"       titleID="projectionMenufisheyeballlabel" action="invokeKrFunction('setViewFisheyeBall();')"   thumbnail=""/>

		</group>
	</internaldata>
</ptplugin>

<action name="showKolorMenu-projectionMenu">
	
	js(openKolorMenu(projectionMenu));
</action>

<action name="hideKolorMenu-projectionMenu">
	js(invokePluginFunction(projectionMenu, hideKolorMenu));
</action>

<events name="kolorMenuEvents-projectionMenu" 
		keep="true"
		
		
		onTourStart="js(openKolorMenu(projectionMenu));"
/>


  <krpano stackThumbsallpanoramasIsOpen="false" />

  <events name="stackThumbsallpanoramasEvents"
          onTourStart="stackThumbsallpanoramasBuild();"
          hidetourcontrols="stackThumbsallpanoramasHide();"
          showtourcontrols="stackThumbsallpanoramasShow();"
          hidetourthumbnails="stackThumbsallpanoramasHide();"
          showtourthumbnails="stackThumbsallpanoramasShow();"
          keep="true"/>

  <layer name="stackThumbsallpanoramasMainLayer" type="container" zorder="5" width="1" height="1" alpha="1" keep="true" x="0" y="0" visible="true" align="topright" />

  <action name="stackThumbsallpanoramasHide">
    set(hstcstackThumbsallpanoramasi-wait,25);
    for (set(hstcstackThumbsallpanoramasi, 0), hstcstackThumbsallpanoramasi LT scene.count, inc(hstcstackThumbsallpanoramasi),
      if(hstcstackThumbsallpanoramasi-wait == hstcstackThumbsallpanoramasi,
        add(hstcstackThumbsallpanoramasi-wait, 25);
        wait(0);
      );
      txtadd(thumbname,'stackThumbsallpanoramas_', get(hstcstackThumbsallpanoramasi));
      set(layer[get(thumbname)].visible, false);
    );
  </action>
  <action name="stackThumbsallpanoramasShow">
  if (tour_displaythumbnails, 
    set(sstcstackThumbsallpanoramasi-wait,25);
    for (set(sstcstackThumbsallpanoramasi, 0), sstcstackThumbsallpanoramasi LT scene.count, inc(sstcstackThumbsallpanoramasi),
      if(sstcstackThumbsallpanoramasi-wait == sstcstackThumbsallpanoramasi,
        add(sstcstackThumbsallpanoramasi-wait, 25);
        wait(0);
      );
      txtadd(thumbname,'stackThumbsallpanoramas_', get(sstcstackThumbsallpanoramasi));
      set(layer[get(thumbname)].visible, true);
    );
  );
  </action>

  <action name="stackThumbsallpanoramasMagnify">
    tween(layer[%1].alpha,  1.0, 0.3, easeInQuad);
    tween(layer[%1].scale, 1.05, 0.3, easeInQuad);

      set(layer[%1].effect, glow(0xffffff,1,6,255));
      set(layer[%1].jsborder, '3px solid #ffffff');
  </action>

  <action name="stackThumbsallpanoramasLies">
    tween(layer[%1].alpha, 0.8, 0.3, easeInQuad);
    tween(layer[%1].scale, 1.0, 0.3, easeInQuad);

      set(layer[%1].effect, glow(0xffffff,0.2,2,255));
      set(layer[%1].jsborder, '1px solid #ffffff');
  </action>


<krpano stackThumbsallpanoramasBuilt="false"/>

  <action name="stackThumbsallpanoramasBuild">
    ifnot (stackThumbsallpanoramasBuilt,
    set(bststackThumbsallpanoramasi-wait,25);
    for (set(bststackThumbsallpanoramasi, 0), bststackThumbsallpanoramasi LT scene.count, inc(bststackThumbsallpanoramasi),
      if(bststackThumbsallpanoramasi-wait == bststackThumbsallpanoramasi,
        add(bststackThumbsallpanoramasi-wait, 25);
        wait(0);
      );

        copy(thumburl, scene[get(bststackThumbsallpanoramasi)].thumburl);
        txtadd(thumbname,'stackThumbsallpanoramas_', get(bststackThumbsallpanoramasi));

        addplugin(get(thumbname));
        set(layer[get(thumbname)].parent, "stackThumbsallpanoramasMainLayer");
        set(layer[get(thumbname)].url   , get(thumburl));
        set(layer[get(thumbname)].keep  , true);
        set(layer[get(thumbname)].align , topright);
        set(layer[get(thumbname)].edge  , center);

        set(layer[get(thumbname)].width , 75);
        set(layer[get(thumbname)].height, 37);

        set(layer[get(thumbname)].alpha , 0.8);
        set(layer[get(thumbname)].visible , false);

        if (bststackThumbsallpanoramasi GE 4, set(reali, 4), set(reali, get(bststackThumbsallpanoramasi)));

        mul(layer[get(thumbname)].x, reali,3);
        mul(layer[get(thumbname)].y, reali,3);

        add(closedthumboffsetx, 10, 37);
        add(layer[get(thumbname)].x, get(closedthumboffsetx));

        add(closedthumboffsety, 10, 18);
        add(layer[get(thumbname)].y, get(closedthumboffsety));

        copy(layer[get(thumbname)].xsmall, layer[get(thumbname)].x);
        copy(layer[get(thumbname)].ysmall, layer[get(thumbname)].y);

        add(layer[get(thumbname)].zorder, 0, bststackThumbsallpanoramasi);
          set(layer[get(thumbname)].effect, glow(0xffffff,0.2,2,255));
          set(layer[get(thumbname)].jsborder, '1px solid #ffffff');

          set(layer[get(thumbname)].tooltip,get(scene[get(bststackThumbsallpanoramasi)].titleid));

        set(layer[get(thumbname)].thumbpos, get(bststackThumbsallpanoramasi));
        set(layer[get(thumbname)].linkedpano, get(scene[get(bststackThumbsallpanoramasi)].name) );
        set(layer[get(thumbname)].onclick, stackThumbsallpanoramasOpen() );
      );

      set(stackThumbsallpanoramasBuilt, true);

      stackThumbsallpanoramasShow();

      
    );
  </action>

  <action name="stackThumbsallpanoramasOpenThumb">
    if(%2 != NEXT,
      set(pos,0);
      copy(curpos, layer[%1].thumbpos);
      set(xdst, 0);
      set(ydst, 0);
    );
    if (pos LT curpos,
      inc(pos);

        inc(xdst, 160);
        if (ishtml5,
          sub(xmax, stagewidth, 150);
         ,
          sub(xmax, area.pixelwidth, 150);
        );
        dec(xmax, 30);
        if(xdst GT xmax,
          inc(ydst, 85);
          set(xdst,0);
        );

      stackThumbsallpanoramasOpenThumb(%1,NEXT);
     ,
      set(openthumboffsetx, 75);
      add(openthumboffsetx, 10);
      add(xdst, get(openthumboffsetx));

      set(openthumboffsety, 37);
      add(openthumboffsety, 10);
      add(ydst, get(openthumboffsety));

      tween(layer[%1].x, get(xdst) );
      tween(layer[%1].y, get(ydst) );
      tween(layer[%1].width , 150);
      tween(layer[%1].height, 75);
    );
  </action>

  <action name="stackThumbsallpanoramasOpen">
    set(oststackThumbsallpanoramasi-wait,25);
    for (set(oststackThumbsallpanoramasi, 0), oststackThumbsallpanoramasi LT scene.count, inc(oststackThumbsallpanoramasi),
    if(oststackThumbsallpanoramasi-wait == oststackThumbsallpanoramasi,
      add(oststackThumbsallpanoramasi-wait, 25);
      wait(0);
    );
      txtadd(thumbname,'stackThumbsallpanoramas_',get(oststackThumbsallpanoramasi));
      stackThumbsallpanoramasOpenThumb(get(thumbname));
      set(layer[get(thumbname)].onover , stackThumbsallpanoramasMagnify(get(name)); );
      set(layer[get(thumbname)].onout  , stackThumbsallpanoramasLies(get(name)); hideTooltip(); );
      set(layer[get(thumbname)].onhover, showTooltip(topright); );
      set(layer[get(thumbname)].onclick, stackThumbsallpanoramasLies(get(name)); stackThumbsallpanoramasClose(0); mainloadscene(get(linkedpano)); );
    );
    
    set(stackThumbsallpanoramasIsOpen, true);
  </action>

  <action name="stackThumbsallpanoramasClose">
    set(cststackThumbsallpanoramasi-wait,25);
    for (set(cststackThumbsallpanoramasi, 0), cststackThumbsallpanoramasi LT scene.count, inc(cststackThumbsallpanoramasi),
      if(cststackThumbsallpanoramasi-wait == cststackThumbsallpanoramasi,
        add(cststackThumbsallpanoramasi-wait, 25);
        wait(0);
      );
      txtadd(thumbname,'stackThumbsallpanoramas_', get(cststackThumbsallpanoramasi));
      stackThumbsallpanoramasCloseThumb(get(thumbname));
    );
    
    set(stackThumbsallpanoramasIsOpen, false);
  </action>
  <action name="stackThumbsallpanoramasCloseThumb">
    tween(layer[%1].x, get(layer[%1].xsmall));
    tween(layer[%1].y, get(layer[%1].ysmall));
    tween(layer[%1].width , 75);
    tween(layer[%1].height, 37);
    set(layer[%1].alpha  , 0.8  );
    set(layer[%1].onover , NULL );
    set(layer[%1].onout  , NULL );
    set(layer[%1].onhover, NULL );hideTooltip();
    set(layer[%1].onclick, stackThumbsallpanoramasOpen() );
  </action>



	
	
	<ptplugin name="floorPlan" engine="KolorFloorPlan">
		<settings>
			<option name="background_color" value="f2f2f2" type="string" />
			<option name="background_lighter_color" value="ffffff" type="string" />
			<option name="background_darker_color" value="cacaca" type="string" />
			<option name="background_alpha" value="1" type="float" />
			<option name="text_color" value="000000" type="string" />
			<option name="resize" value="true" type="bool" />
			<option name="fp_selector" value="one" type="string" />
			<option name="fp_selector_label" value="floorPlanmenu_label" type="string" />
			<option name="display_title" value="true" type="bool" />
			
			<option name="title" value="project_floor_title" type="string" />
			
			<option name="title_font" value="Verdana" type="string" />
			<option name="title_size" value="14" type="int" />
			<option name="title_weight" value="normal" type="string" />
			<option name="title_decoration" value="normal" type="string" />
			<option name="title_color" value="000000" type="string" />
			<option name="display_orientation" value="true" type="bool" />
			<option name="display_radar" value="true" type="bool" />
			<option name="radar_radius" value="35" type="int" />
			<option name="radar_line_width" value="1" type="int" />
			<option name="radar_line_color" value="41ace6" type="string" />
			<option name="radar_line_alpha" value="0.500007629510948" type="float" />
			<option name="radar_fill_color" value="ffffff" type="string" />
			<option name="radar_fill_alpha" value="0.300007629510948" type="float" />
			<option name="close_on_click" value="false" type="bool" />
			<option name="zorder" value="6" type="int" />
		</settings>
		
		<floorplanItems selectedItem="fpitemmain" selectedSpot="" selectedSpotScene="" selectedSpotHeading="" selectedSpotFov="">
				
				<floorplanItem 
					name="fpitemmain" 
					width="601" 
					height="800" 
					groupName="" 
					url="floorplan/map1.jpg" 
					title="project_floor_title"
					heading="0">
							<spot name="spotmap74" posX="0.421986" posY="0.946809" heading="0" desc="spotmap74_tooltip" descType="tooltip" groupName="" isScene="true" scene="pano35" jsClick="spotmap74ActionSpotFloorPlan">
								<icon url="spots/hotspot_neutral_user_defaultmap0.png" iconWidth="32" iconHeight="32" iconAnchor="center" />
							</spot>
							<spot name="spotmap77" posX="0.400709" posY="0.912234" heading="0" desc="spotmap77_tooltip" descType="tooltip" groupName="" isScene="true" scene="pano22" jsClick="spotmap77ActionSpotFloorPlan">
								<icon url="spots/hotspot_neutral_user_defaultmap0.png" iconWidth="32" iconHeight="32" iconAnchor="center" />
							</spot>
							<spot name="spotmap78" posX="0.404255" posY="0.861702" heading="0" desc="spotmap78_tooltip" descType="tooltip" groupName="" isScene="true" scene="pano23" jsClick="spotmap78ActionSpotFloorPlan">
								<icon url="spots/hotspot_neutral_user_defaultmap0.png" iconWidth="32" iconHeight="32" iconAnchor="center" />
							</spot>
							<spot name="spotmap79" posX="0.41844" posY="0.829787" heading="0" desc="spotmap79_tooltip" descType="tooltip" groupName="" isScene="true" scene="pano34" jsClick="spotmap79ActionSpotFloorPlan">
								<icon url="spots/hotspot_neutral_user_defaultmap0.png" iconWidth="32" iconHeight="32" iconAnchor="center" />
							</spot>
							<spot name="spotmap82" posX="0.41844" posY="0.68883" heading="0" desc="spotmap82_tooltip" descType="tooltip" groupName="" isScene="true" scene="pano21" jsClick="spotmap82ActionSpotFloorPlan">
								<icon url="spots/hotspot_neutral_user_defaultmap0.png" iconWidth="32" iconHeight="32" iconAnchor="center" />
							</spot>
							<spot name="spotmap83" posX="0.343226" posY="0.614341" heading="0" desc="spotmap83_tooltip" descType="tooltip" groupName="" isScene="true" scene="pano24" jsClick="spotmap83ActionSpotFloorPlan">
								<icon url="spots/hotspot_neutral_user_defaultmap0.png" iconWidth="32" iconHeight="32" iconAnchor="center" />
							</spot>
							<spot name="spotmap84" posX="0.397163" posY="0.523936" heading="0" desc="spotmap84_tooltip" descType="tooltip" groupName="" isScene="true" scene="pano30" jsClick="spotmap84ActionSpotFloorPlan">
								<icon url="spots/hotspot_neutral_user_defaultmap0.png" iconWidth="32" iconHeight="32" iconAnchor="center" />
							</spot>
							<spot name="spotmap85" posX="0.393617" posY="0.345745" heading="0" desc="spotmap85_tooltip" descType="tooltip" groupName="" isScene="true" scene="pano32" jsClick="spotmap85ActionSpotFloorPlan">
								<icon url="spots/hotspot_neutral_user_defaultmap0.png" iconWidth="32" iconHeight="32" iconAnchor="center" />
							</spot>
							<spot name="spotmap86" posX="0.475177" posY="0.279255" heading="0" desc="spotmap86_tooltip" descType="tooltip" groupName="" isScene="true" scene="pano28" jsClick="spotmap86ActionSpotFloorPlan">
								<icon url="spots/hotspot_neutral_user_defaultmap0.png" iconWidth="32" iconHeight="32" iconAnchor="center" />
							</spot>
							<spot name="spotmap87" posX="0.397163" posY="0.412234" heading="0" desc="spotmap87_tooltip" descType="tooltip" groupName="" isScene="true" scene="pano20" jsClick="spotmap87ActionSpotFloorPlan">
								<icon url="spots/hotspot_neutral_user_defaultmap0.png" iconWidth="32" iconHeight="32" iconAnchor="center" />
							</spot>
							<spot name="spotmap192" posX="0.75871" posY="0.207364" heading="0" desc="spotmap192_tooltip" descType="tooltip" groupName="" isScene="true" scene="pano27" jsClick="spotmap192ActionSpotFloorPlan">
								<icon url="spots/hotspot_neutral_user_defaultmap0.png" iconWidth="32" iconHeight="32" iconAnchor="center" />
							</spot>
							<spot name="spotmap193" posX="0.68" posY="0.762597" heading="0" desc="spotmap193_tooltip" descType="tooltip" groupName="" isScene="true" scene="pano33" jsClick="spotmap193ActionSpotFloorPlan">
								<icon url="spots/hotspot_neutral_user_defaultmap0.png" iconWidth="32" iconHeight="32" iconAnchor="center" />
							</spot>
							<spot name="spotmap195" posX="0.482581" posY="0.571705" heading="0" desc="spotmap195_tooltip" descType="tooltip" groupName="" isScene="true" scene="pano26" jsClick="spotmap195ActionSpotFloorPlan">
								<icon url="spots/hotspot_neutral_user_defaultmap0.png" iconWidth="32" iconHeight="32" iconAnchor="center" />
							</spot>
							<spot name="spotmap197" posX="0.610323" posY="0.599806" heading="0" desc="spotmap197_tooltip" descType="tooltip" groupName="" isScene="true" scene="pano25" jsClick="spotmap197ActionSpotFloorPlan">
								<icon url="spots/hotspot_neutral_user_defaultmap0.png" iconWidth="32" iconHeight="32" iconAnchor="center" />
							</spot>
							<spot name="spotmap198" posX="0.59871" posY="0.36531" heading="0" desc="spotmap198_tooltip" descType="tooltip" groupName="" isScene="true" scene="pano31" jsClick="spotmap198ActionSpotFloorPlan">
								<icon url="spots/hotspot_neutral_user_defaultmap0.png" iconWidth="32" iconHeight="32" iconAnchor="center" />
							</spot>
							<spot name="spotmap199" posX="0.597419" posY="0.455426" heading="0" desc="spotmap199_tooltip" descType="tooltip" groupName="" isScene="true" scene="pano29" jsClick="spotmap199ActionSpotFloorPlan">
								<icon url="spots/hotspot_neutral_user_defaultmap0.png" iconWidth="32" iconHeight="32" iconAnchor="center" />
							</spot>
				</floorplanItem>
			
			
		</floorplanItems>
	</ptplugin>
	
	<action name="kolorFloorplanJsReady-floorPlan">
		set(ptplugin[floorPlan].jsready, true);
	</action>
	
	
		
			<action name="spotmap74ActionSpotFloorPlan">
          if (xml.scene != pano35,
            mainloadscene(pano35);
          );
      lookat(0.000000, 0.000000, 90.000000);
    </action>
			<action name="spotmap77ActionSpotFloorPlan">
          if (xml.scene != pano22,
            mainloadscene(pano22);
          );
      lookat(get(panoview.h), get(panoview.v), get(panoview.fov));
    </action>
			<action name="spotmap78ActionSpotFloorPlan">
          if (xml.scene != pano23,
            mainloadscene(pano23);
          );
      lookat(get(panoview.h), get(panoview.v), get(panoview.fov));
    </action>
			<action name="spotmap79ActionSpotFloorPlan">
          if (xml.scene != pano34,
            mainloadscene(pano34);
          );
      lookat(-176.166667, 20.500000, 90.000000);
    </action>
			<action name="spotmap82ActionSpotFloorPlan">
          if (xml.scene != pano21,
            mainloadscene(pano21);
          );
      lookat(get(panoview.h), get(panoview.v), get(panoview.fov));
    </action>
			<action name="spotmap83ActionSpotFloorPlan">
          if (xml.scene != pano24,
            mainloadscene(pano24);
          );
      lookat(get(panoview.h), get(panoview.v), get(panoview.fov));
    </action>
			<action name="spotmap84ActionSpotFloorPlan">
          if (xml.scene != pano30,
            mainloadscene(pano30);
          );
      lookat(-22.500000, 5.850000, 90.000000);
    </action>
			<action name="spotmap85ActionSpotFloorPlan">
          if (xml.scene != pano32,
            mainloadscene(pano32);
          );
      lookat(get(panoview.h), get(panoview.v), get(panoview.fov));
    </action>
			<action name="spotmap86ActionSpotFloorPlan">
          if (xml.scene != pano28,
            mainloadscene(pano28);
          );
      lookat(get(panoview.h), get(panoview.v), get(panoview.fov));
    </action>
			<action name="spotmap87ActionSpotFloorPlan">
          if (xml.scene != pano20,
            mainloadscene(pano20);
          );
      lookat(-133.200000, -0.450000, 90.000000);
    </action>
			<action name="spotmap192ActionSpotFloorPlan">
          if (xml.scene != pano27,
            mainloadscene(pano27);
          );
      lookat(get(panoview.h), get(panoview.v), get(panoview.fov));
    </action>
			<action name="spotmap193ActionSpotFloorPlan">
          if (xml.scene != pano33,
            mainloadscene(pano33);
          );
      lookat(get(panoview.h), get(panoview.v), get(panoview.fov));
    </action>
			<action name="spotmap195ActionSpotFloorPlan">
          if (xml.scene != pano26,
            mainloadscene(pano26);
          );
      lookat(get(panoview.h), get(panoview.v), get(panoview.fov));
    </action>
			<action name="spotmap197ActionSpotFloorPlan">
          if (xml.scene != pano25,
            mainloadscene(pano25);
          );
      lookat(get(panoview.h), get(panoview.v), get(panoview.fov));
    </action>
			<action name="spotmap198ActionSpotFloorPlan">
          if (xml.scene != pano31,
            mainloadscene(pano31);
          );
      lookat(get(panoview.h), get(panoview.v), get(panoview.fov));
    </action>
			<action name="spotmap199ActionSpotFloorPlan">
          if (xml.scene != pano29,
            mainloadscene(pano29);
          );
      lookat(get(panoview.h), get(panoview.v), get(panoview.fov));
    </action>
	
	
	
	<events name="floorPlanEvents" 
	onxmlcomplete="ifnot(floorPlanFloorPlanLoaded,set(tour_displayfloorplan,true););floorPlanActivateDefaultSpot();" 
	onviewchanged="floorPlanOnViewChange();" 
	onhidetourfloorplan="floorPlanCloseTourFloorPlan();" 
	onshowtourfloorplan="if(tour_displayfloorplan,floorPlanOpenTourFloorPlan(););" 
	onTourStart="set(loadedState-floorPlanArea, get(tour_displaycontrols));floorPlanOpenTourFloorPlan();"
	keep="true" />
	
	
	<krpano floorPlanFloorPlanLoaded="false" />
	
	<action name="floorPlanHideTourFloorPlan">
		hideKolorArea-floorPlanArea(true);
	</action>
	
	<action name="floorPlanCloseTourFloorPlan">
		if(ptplugin[floorPlanArea].isOpen,
			closeKolorArea-floorPlanArea();
		);
	</action>
	
	<action name="floorPlanShowTourFloorPlan">
		showKolorArea-floorPlanArea(true);
	</action>
	
	<action name="floorPlanOpenTourFloorPlan">
		ifnot(ptplugin[floorPlanArea].isOpen,
			openKolorArea-floorPlanArea();
		);
	</action>
	
	<action name="floorPlanOnViewChange">
		if (floorPlanFloorPlanLoaded == true,
			ifnot(ptplugin[floorPlan].floorplanItems[0].selectedSpot == "",
				js(invokePluginFunction(floorPlan, changeDirection, get(xml.scene), get(view.hlookat), get(view.fov)));
			);
		);
	</action>
	
	<action name="floorPlanActivateSpot">
		
		set(ptplugin[floorPlan].floorplanItems[0].selectedSpot, %1);
		set(ptplugin[floorPlan].floorplanItems[0].selectedItem, %2);
		
		ifnot(%1 == "",
			set(ptplugin[floorPlan].floorplanItems[0].selectedSpotScene, get(xml.scene));
			set(ptplugin[floorPlan].floorplanItems[0].selectedSpotHeading, get(view.hlookat));
			set(ptplugin[floorPlan].floorplanItems[0].selectedSpotFov, get(view.fov));
		);
		
		js(invokePluginFunction(floorPlan, selectSpot, %1, %2, %3));
	</action>
	
	<action name="floorPlanDeactivateSpot">
		set(ptplugin[floorPlan].floorplanItems[0].selectedSpot, "");
		
		js(invokePluginFunction(floorPlan, unselectSpot));
	</action>
	
	<action name="floorPlanActivateDefaultSpot">
		set(floorPlanFloorPlanLoaded, true);
		
		set(floorPlanSpotFound, "");
		set(floorPlanSpotScene, "");
		set(floorPlanItemFound, "");
		set(floorPlanItemSearch, true);
		set(floorPlanSpotSearch, true);
		set(floorPlanSpotSearchContinue, true);
		
		
		set(defaultfloorplaniteminc-wait,50);
		for(set(defaultfloorplaniteminc,0), defaultfloorplaniteminc LT ptplugin[floorPlan].floorplanItems[0].floorplanItem.count , inc(defaultfloorplaniteminc),
			if(defaultfloorplaniteminc-wait == defaultfloorplaniteminc,
				add(defaultfloorplaniteminc-wait,50);
				wait(0);
			);
			if(floorPlanSpotSearch == true,
				
				if(ptplugin[floorPlan].floorplanItems[0].floorplanItem[get(defaultfloorplaniteminc)].groupName == scene[get(xml.scene)].group,
					set(floorPlanItemFound, get(ptplugin[floorPlan].floorplanItems[0].floorplanItem[get(defaultfloorplaniteminc)].name));
					set(ptplugin[floorPlan].floorplanItems[0].selectedItem, get(ptplugin[floorPlan].floorplanItems[0].floorplanItem[get(defaultfloorplaniteminc)].name));
					set(floorPlanItemSearch, false);
				,
					
					if(floorPlanItemFound == "",
						set(floorPlanItemFound, get(ptplugin[floorPlan].floorplanItems[0].floorplanItem[fpitemmain].name));
						set(ptplugin[floorPlan].floorplanItems[0].selectedItem, get(ptplugin[floorPlan].floorplanItems[0].floorplanItem[fpitemmain].name));
					);
				);
			);
			if(floorPlanSpotSearch == true,
				set(defaultspotinc-wait,50);
				for(set(defaultspotinc,0), defaultspotinc LT ptplugin[floorPlan].floorplanItems[0].floorplanItem[get(defaultfloorplaniteminc)].spot.count , inc(defaultspotinc),
					if(defaultspotinc-wait == defaultspotinc,
						add(defaultspotinc-wait,50);
						wait(0);
					);
					if(ptplugin[floorPlan].floorplanItems[0].floorplanItem[get(defaultfloorplaniteminc)].spot[get(defaultspotinc)].isScene == true,
					
						if(floorPlanSpotSearchContinue == true,
							if(ptplugin[floorPlan].floorplanItems[0].floorplanItem[get(defaultfloorplaniteminc)].spot[get(defaultspotinc)].scene == xml.scene,
								set(floorPlanSpotFound, get(ptplugin[floorPlan].floorplanItems[0].floorplanItem[get(defaultfloorplaniteminc)].spot[get(defaultspotinc)].name));
								set(floorPlanSpotScene, get(ptplugin[floorPlan].floorplanItems[0].floorplanItem[get(defaultfloorplaniteminc)].spot[get(defaultspotinc)].scene));
								set(ptplugin[floorPlan].floorplanItems[0].selectedItem, get(ptplugin[floorPlan].floorplanItems[0].floorplanItem[get(defaultfloorplaniteminc)].name));
								if(floorPlanItemSearch == false,
									set(floorPlanSpotSearchContinue, false);
									set(floorPlanSpotSearch, false);
								);
							);
						);
					);
					
				);
			);
		);
		
		if(floorPlanSpotFound == "",
			
			
			floorPlanDeactivateSpot();
			
			
			set(ptplugin[floorPlan].floorplanItems[0].selectedItem, get(floorPlanItemFound));
			
			
			ifnot(ptplugin[floorPlan].floorplanItems[0].selectedItem == "",
				floorPlanActivateSpot("", get(ptplugin[floorPlan].floorplanItems[0].selectedItem), "");
			);
		,
			
			floorPlanActivateSpot(get(floorPlanSpotFound), get(ptplugin[floorPlan].floorplanItems[0].selectedItem), get(floorPlanSpotScene));
		);
	</action>
	
	<action name="floorPlanChangeTitle">
		js(invokePluginFunction(floorPlan, changeTitle, %1));
	</action>
	
	<ptplugin name="floorPlanArea" engine="kolorArea">
	<settings>
		<option name="position" value="bottomleft" type="string" />
		<option name="start_position" value="left" type="string" />
		<option name="margin_x" value="10" type="int" />
		<option name="margin_y" value="3" type="int" />
		<option name="display_title" value="true" type="bool" />
		<option name="title" value="project_floor_title" type="string" />
		<option name="title_font" value="Verdana" type="string" />
		<option name="title_size" value="14" type="int" />
		<option name="title_weight" value="normal" type="string" />
		<option name="title_decoration" value="normal" type="string" />
		<option name="title_color" value="000000" type="string" />
		<option name="close_displayed" value="true" type="bool" />
		<option name="background_color" value="f2f2f2" type="string" />
		<option name="background_alpha" value="1" type="float" />
		<option name="overlay_displayed" value="false" type="bool" />
		<option name="overlay_color" value="000000" type="string" />
		<option name="overlay_alpha" value="0.500007629510948" type="float" />
		<option name="padding" value="17" type="int" />
		<option name="topleft_radius" value="1" type="int" />
		<option name="topright_radius" value="1" type="int" />
		<option name="bottomleft_radius" value="1" type="int" />
		<option name="bottomright_radius" value="1" type="int" />
		<option name="area_border_width" value="1" type="int" />
		<option name="area_border_color" value="f2f2f2" type="string" />
		<option name="area_width" value="15" type="int" />
		<option name="area_height" value="45" type="int" />
		<option name="area_width_unit" value="percent" type="string" />
		<option name="area_height_unit" value="percent" type="string" />
		<option name="animation" value="true" type="bool" />
		<option name="animation_duration" value="500" type="int" />
		<option name="close_on_click" value="false" type="bool" />
		<option name="refresh_content" value="false" type="bool" />
		<option name="open_callback" value="addKolorFloorPlan('floorPlan', 'floorPlanArea-floorplanDIV');" type="string" />
		<option name="close_callback" value="invokeKrFunction('closeKolorAreaCallback-floorPlanArea')" type="string" />
		<option name="zorder" value="6" type="int" />
	</settings>
	</ptplugin>
	
	<action name="kolorAreaJsReady-floorPlanArea">
		set(ptplugin[floorPlanArea].jsready, true);
	</action>
	
	<action name="openKolorArea-floorPlanArea">
		ifnot(ptplugin[floorPlanArea].isOpen,
			set(ptplugin[floorPlanArea].isOpen, true);
			set(ptplugin[floorPlanArea].visible, true);
			set(ptplugin[floorPlanArea].doNotDeleteMe, false);
			pauseautorotation();
			js(showKolorArea(floorPlanArea, &lt;div id="floorPlanArea-floorplanDIV"&gt;&lt;/div&gt;));
			events.dispatch(onremovedisplayedobject);
		);
	</action>
	
	<action name="closeKolorArea-floorPlanArea">
		if(ptplugin[floorPlanArea].isOpen,
			resumeautorotation();
			js(invokePluginFunction(floorPlanArea, closeKolorArea));
			set(ptplugin[floorPlanArea].isOpen, false);
		);
	</action>
	
	<action name="toggleKolorArea-floorPlanArea">
		if(ptplugin[floorPlanArea].isOpen,
			closeKolorArea-floorPlanArea();
		,
			openKolorArea-floorPlanArea();
		);
	</action>
	
	<action name="closeKolorAreaCallback-floorPlanArea">
		resumeautorotation();
		set(ptplugin[floorPlanArea].isOpen, false);hideFloorplan();
	</action>
	
	<action name="changeTitleKolorArea-floorPlanArea">
		js(invokePluginFunction(floorPlanArea, changeTitle, %1));
	</action>
	
	<action name="showKolorArea-floorPlanArea">
		set(ptplugin[floorPlanArea].visible, true);
		set(ptplugin[floorPlanArea].doNotDeleteMe, false);
		pauseautorotation();
		js(invokePluginFunction(floorPlanArea, showKolorArea, %1));
		events.dispatch(onremovedisplayedobject);
	</action>
		
	<action name="hideKolorArea-floorPlanArea">
		resumeautorotation();
		set(ptplugin[floorPlanArea].visible, false);
		js(invokePluginFunction(floorPlanArea, hideKolorArea, %1));
	</action>
	
	<events name="kolorAreaEvents-floorPlanArea" 
		keep="true"
		hidetourcontrols="if(loadedState-floorPlanArea,hideKolorArea-floorPlanArea(false););"
		showtourcontrols="if(tour_displayfloorplan,showKolorArea-floorPlanArea(false););set(loadedState-floorPlanArea, get(tour_displaycontrols));"
	/>
	
	<action name="setViewPannini">
	stopSetViewTweens();
	setViewPanniniComplete();
</action>

<action name="setViewPanniniComplete">
	tween(view.architectural, 0.0, 0.25, easeoutquad,
		tween(view.fovmax, get(panoview.fovmax), distance(179, 1.00));
		set(backtonormalfirst,false);
		if(view.pannini == false, set(backtonormalfirst,true); );
		if(view.stereographic == false, set(backtonormalfirst,true); );
		if(backtonormalfirst, tween(view.fisheye, 0.0 ,distance(1.0, 0.25), easeoutquad, WAIT); );
		set(view.pannini, true);
		set(view.stereographic, true);
		set(view.fisheyefovlink, 1.5);
		tween(view.fisheye, 1.0, distance(1.0, 0.75));
		tween(view.vlookat, get(panoview.v), 1.25);
		if(panoview.fov LE view.fov, tween(view.fov, get(panoview.fov), distance(50, 0.45)); );
	);
</action><action name="setViewFisheye">
	stopSetViewTweens();
	setViewFisheyeComplete();
</action>

<action name="setViewFisheyeComplete">
	tween(view.architectural, 0.0, distance(1.0, 0.30), easeoutquad, 
		tween(view.fisheye, 0.0, distance(1.0, 0.30), easeoutquad,
			set(view.stereographic,false);
			if(view.pannini, set(view.pannini,false); delayedcall(0,updateobject(true,true)); );
			tween(view.fovmax, 179, 0.25);
			set(view.fisheyefovlink, 1.5);
			if(panoview.fov LE view.fov, tween(view.fov, get(panoview.fov), distance(50, 0.45)); );
			tween(view.fisheye, 0.40, distance(1.0, 1.25));
			tween(view.vlookat, get(panoview.v), 1.25);
		);
	);
</action><action name="setViewStereographic">
	stopSetViewTweens();
	setViewStereographicComplete();
</action>

<action name="setViewStereographicComplete">
	tween(view.architectural, 0.0, 0.25, easeoutquad, 
		tween(view.fovmax, get(panoview.fovmax), distance(179, 1.00));
		set(backtonormalfirst,false);
		if(view.pannini == true, set(backtonormalfirst,true) );
		if(view.stereographic == false, set(backtonormalfirst,true) );
		if(backtonormalfirst, tween(view.fisheye, 0.0 ,distance(1.0, 0.25), easeoutquad, WAIT); );
		if(view.pannini, set(view.pannini,false); delayedcall(0,updateobject(true,true)); );
		set(view.stereographic, true);
		set(view.fisheyefovlink, 1.5);
		tween(view.fisheye, 1.0, distance(1.0, 0.75), easeoutquad);
		tween(view.vlookat, get(panoview.v), 1.25);
		if(panoview.fov LE view.fov, tween(view.fov, get(panoview.fov), distance(50, 0.45)); );
	);
</action>
  <action name="hideFloorplan">set(tour_displayfloorplan, false);events.dispatch(onhidetourfloorplan);</action>
  <action name="showFloorplan">set(tour_displayfloorplan, true); events.dispatch(onshowtourfloorplan);</action>
  <action name="hideTourControls">set(tour_displaycontrols, false);events.dispatch(hidetourcontrols);</action>
  <action name="showTourControls">set(tour_displaycontrols, true); events.dispatch(showtourcontrols);</action>
  <action name="exitFullScreen" devices="fullscreensupport">set(tour_fullscreen,false);js(setFullscreen(false));</action>
  <action name="enterFullScreen" devices="fullscreensupport">set(tour_fullscreen,true);js(setFullscreen(true));</action>
  <action name="switchFullScreen">if(tour_fullscreen,exitFullScreen();,enterFullScreen(););</action>

  
  <events name="krpanoExitFullscreenEvent"
    onexitfullscreen="if(tour_fullscreen,exitFullScreenChangeEvent(););"
    keep="true" />

  <action name="exitFullScreenChangeEvent" devices="fullscreensupport">set(tour_fullscreen,false);events.dispatch(onexitfullscreen);</action>
  <action name="enterFullScreenChangeEvent" devices="fullscreensupport">set(tour_fullscreen,true);events.dispatch(onenterfullscreen);</action>
  <action name="exitFullScreenFallback">set(fullscreen,false);</action>
  <action name="enterFullScreenFallback">set(fullscreen,true);</action>
  
  <action name="resizeFullScreenEvent">delayedcall(0,updatescreen(););</action><action name="setViewArchitectural">
	stopSetViewTweens();
	setViewArchitecturalComplete();
</action>

<action name="setViewArchitecturalComplete">
	tween(view.fovmax, get(panoview.fovmax), distance(179, 1.00), easeoutquad);
	tween(view.architectural, 1.0, distance(1.0, 0.45), easeoutquad, 
		tween(view.fisheye, 0.0, distance(1.0, 0.45), easeoutquad, 
			set(view.fisheyefovlink, 0.5);
			set(view.stereographic,false);
			if(view.pannini, set(view.pannini,false); delayedcall(0,updateobject(true,true)); );
			tween(view.vlookat, get(panoview.v), 1.25);
			if(panoview.fov LE view.fov, tween(view.fov, get(panoview.fov), distance(50, 0.45)); );
		);
	);
</action><action name="setViewLittlePlanet">
	stopSetViewTweens();
	setViewLittlePlanetComplete();
</action>

<action name="setViewLittlePlanetComplete">
	tween(view.architectural, 0.0, 0.25, easeoutquad, 
		tween(view.vlookat, 90, distance(179, 1.50), easeoutquad);
		set(backtonormalfirst,false);
		if(view.pannini == true, set(backtonormalfirst,true) );
		if(view.stereographic == false, set(backtonormalfirst,true) );
		if(backtonormalfirst, tween(view.fisheye, 0.0 ,distance(1.0, 0.25), easeoutquad, WAIT); );
		if(view.pannini, set(view.pannini,false); delayedcall(0, updateobject(true,true)); );
		if(panoview.fovmax LE 150, set(view.fovmax, 150); , set(view.fovmax, get(panoview.fovmax)); );
		set(view.stereographic, true);
		set(view.fisheyefovlink, 1.5);
		tween(view.fisheye, 1.0, distance(1.0, 0.75), easeoutquad);
		tween(view.fov, 150, distance(179, 0.75), easeoutquad);
	);
</action><action name="setViewFisheyeBall">
	stopSetViewTweens();
	setViewFisheyeBallComplete();
</action>

<action name="setViewFisheyeBallComplete">
	tween(view.architectural, 0.0, distance(1.0, 0.30), easeoutquad, 
		set(view.fisheyefovlink, 1.5);
		tween(view.fisheye, 1.0, distance(1.0, 0.30), easeoutquad,
			set(view.stereographic,false);
			if(view.pannini, set(view.pannini,false); delayedcall(0,updateobject(true,true)); );
			if(panoview.fovmax LE 179, set(view.fovmax, 179); , set(view.fovmax, get(panoview.fovmax)); );
			tween(view.fov, 179, 4.0, easeInOutQuad );
			tween(view.vlookat, get(panoview.v), 1.25);
			set(display.details, 22);
		);
	);
</action><action name="setViewNormal">
	stopSetViewTweens();
	setViewNormalComplete();
</action>

<action name="setViewNormalComplete">
	tween(view.architectural, 0.0, distance(1.0, 0.45), easeoutquad,
		tween(view.fovmax, get(panoview.fovmax), distance(179, 1.00));
		tween(view.vlookat, get(panoview.v), distance(90, 0.45));
		tween(view.fisheye, 0.0, distance(1.0, 0.45), easeoutquad,
			set(view.stereographic,false);
			if(view.pannini, set(view.pannini,false); delayedcall(0,updateobject(true,true)); );
			set(view.fisheyefovlink, 0.5);
			if(panoview.fov LE view.fov, tween(view.fov, get(panoview.fov), distance(50, 0.45)); );
		);
	);
</action>

<action name="stopSetViewTweens">
	stoptween(view.fov);
	stoptween(view.fovmax);
	stoptween(view.vlookat);
	stoptween(view.fisheye);
	stoptween(view.architectural);
</action>
</krpano>